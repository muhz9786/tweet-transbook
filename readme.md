# 烤推机 - 同好会改

改自夏组烤推机，根据需求重写了后端代码。目前项目为本地服务器，功能为烤推特回复。

---

***状态***：优化中    
***版本***：1.0

---

## 开发问题及目前解决方法

1. 
    **问题**：API需要开发者权限，申请非常困难   
    **解决**：使用webdriver模拟浏览器 【速度慢】
2. 
    **问题**：推特页面动态加载，无法一次获取所有评论，且向下滑动后上方的评论会消失   
    **解决**：顺次遍历评论，读取数据并截图后删除元素，网页自动加载新元素  【速度慢】
3. 
    **问题**：如何辨别回复   
    **解决**：目前并不会判断回复是否为mea（逻辑比较复杂，我偷懒了）。目前使用的判断方法为 - 网页在两层互动之间会通过不含文本的空元素隔开，判断两个空元素之间的回复数是否大于等于2，来判断是否发生对话。  【所以目前需要在界面手动取消无关回复 | 在其他应用场景可能造成问题】
4. 
    **问题**：截图使用的js脚本为`html2canvas.js`，使用新版本会出现错误，无法使用。   
    **解决**：使用项目中的老版本文件

## TODO
1. 服务器部分耦合度较高，尝试整理代码逻辑，分离业务
2. 运行过慢，需要优化速度
3. 在页面显示进度信息
4. 协同翻译策略  
5. 优化控制台输出（目前服务器程序为python标准库中的http.server提供，无法控制log信息输出）
6. 移植到服务器端（代码好说，钱是问题）

---

## 使用说明
1. 双击exe文件（[这里](https://github.com/muhz9786/tweet-transbook/releases/tag/v1.0)）运行，或通过python运行`startup.py`
2. 浏览器自动打开（若关闭可通过网址：`localhost:8000` 再次打开），同时请勿关闭控制台
3. 在输入框中输入推文链接，点击运行
4. 等待获取推文（你可以在控制台看到进度信息）
5. 运行成功后，网页中自动添加推文及翻译栏，在翻译栏中输入翻译文本
6. 翻译完成后点击生成图片，右键点击图片保存

*翻译过程中可以使用的功能*：
1. 点击翻译栏最左边的勾选框，可以选择是否显示推文
2. 点击勾选框上方的编号，或点击推特图片，滑动条可以自动跳转到对应的推文或翻译栏
3. 使用模板：点击使用模板按钮，在文本框中输入html代码（图片资源需要放在项目文件夹中，并指定相对路径），在翻译栏再次输入时模板即可应用
4. 翻译支持emoji
